{"ast":null,"code":"import { onNextFrame, defaultTimestep } from './on-next-frame.mjs';\nimport { createRenderStep } from './create-render-step.mjs';\nconst maxElapsed = 40;\nlet useDefaultElapsed = true;\nlet runNextFrame = false;\nlet isProcessing = false;\nconst frame = {\n  delta: 0,\n  timestamp: 0\n};\nconst stepsOrder = [\"read\", \"update\", \"preRender\", \"render\", \"postRender\"];\nconst steps = stepsOrder.reduce((acc, key) => {\n  acc[key] = createRenderStep(() => runNextFrame = true);\n  return acc;\n}, {});\nconst sync = stepsOrder.reduce((acc, key) => {\n  const step = steps[key];\n\n  acc[key] = function (process) {\n    let keepAlive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    let immediate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    if (!runNextFrame) startLoop();\n    return step.schedule(process, keepAlive, immediate);\n  };\n\n  return acc;\n}, {});\nconst cancelSync = stepsOrder.reduce((acc, key) => {\n  acc[key] = steps[key].cancel;\n  return acc;\n}, {});\nconst flushSync = stepsOrder.reduce((acc, key) => {\n  acc[key] = () => steps[key].process(frame);\n\n  return acc;\n}, {});\n\nconst processStep = stepId => steps[stepId].process(frame);\n\nconst processFrame = timestamp => {\n  runNextFrame = false;\n  frame.delta = useDefaultElapsed ? defaultTimestep : Math.max(Math.min(timestamp - frame.timestamp, maxElapsed), 1);\n  frame.timestamp = timestamp;\n  isProcessing = true;\n  stepsOrder.forEach(processStep);\n  isProcessing = false;\n\n  if (runNextFrame) {\n    useDefaultElapsed = false;\n    onNextFrame(processFrame);\n  }\n};\n\nconst startLoop = () => {\n  runNextFrame = true;\n  useDefaultElapsed = true;\n  if (!isProcessing) onNextFrame(processFrame);\n};\n\nconst getFrameData = () => frame;\n\nexport default sync;\nexport { cancelSync, flushSync, getFrameData };","map":{"version":3,"names":["onNextFrame","defaultTimestep","createRenderStep","maxElapsed","useDefaultElapsed","runNextFrame","isProcessing","frame","delta","timestamp","stepsOrder","steps","reduce","acc","key","sync","step","process","keepAlive","immediate","startLoop","schedule","cancelSync","cancel","flushSync","processStep","stepId","processFrame","Math","max","min","forEach","getFrameData"],"sources":["C:/Users/Tejaswini Mahale/Desktop/boorish-earthquake-4077/hubspot/node_modules/popmotion/node_modules/framesync/dist/es/index.mjs"],"sourcesContent":["import { onNextFrame, defaultTimestep } from './on-next-frame.mjs';\nimport { createRenderStep } from './create-render-step.mjs';\n\nconst maxElapsed = 40;\nlet useDefaultElapsed = true;\nlet runNextFrame = false;\nlet isProcessing = false;\nconst frame = {\n    delta: 0,\n    timestamp: 0,\n};\nconst stepsOrder = [\n    \"read\",\n    \"update\",\n    \"preRender\",\n    \"render\",\n    \"postRender\",\n];\nconst steps = stepsOrder.reduce((acc, key) => {\n    acc[key] = createRenderStep(() => (runNextFrame = true));\n    return acc;\n}, {});\nconst sync = stepsOrder.reduce((acc, key) => {\n    const step = steps[key];\n    acc[key] = (process, keepAlive = false, immediate = false) => {\n        if (!runNextFrame)\n            startLoop();\n        return step.schedule(process, keepAlive, immediate);\n    };\n    return acc;\n}, {});\nconst cancelSync = stepsOrder.reduce((acc, key) => {\n    acc[key] = steps[key].cancel;\n    return acc;\n}, {});\nconst flushSync = stepsOrder.reduce((acc, key) => {\n    acc[key] = () => steps[key].process(frame);\n    return acc;\n}, {});\nconst processStep = (stepId) => steps[stepId].process(frame);\nconst processFrame = (timestamp) => {\n    runNextFrame = false;\n    frame.delta = useDefaultElapsed\n        ? defaultTimestep\n        : Math.max(Math.min(timestamp - frame.timestamp, maxElapsed), 1);\n    frame.timestamp = timestamp;\n    isProcessing = true;\n    stepsOrder.forEach(processStep);\n    isProcessing = false;\n    if (runNextFrame) {\n        useDefaultElapsed = false;\n        onNextFrame(processFrame);\n    }\n};\nconst startLoop = () => {\n    runNextFrame = true;\n    useDefaultElapsed = true;\n    if (!isProcessing)\n        onNextFrame(processFrame);\n};\nconst getFrameData = () => frame;\n\nexport default sync;\nexport { cancelSync, flushSync, getFrameData };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}